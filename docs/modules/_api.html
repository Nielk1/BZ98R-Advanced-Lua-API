<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>ldoc</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Events">Events</a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/ScriptUtils.html">ScriptUtils</a></li>
  <li><strong>_api</strong></li>
  <li><a href="../modules/_config.html">_config</a></li>
  <li><a href="../modules/_customsavetype.html">_customsavetype</a></li>
  <li><a href="../modules/_gameobject.html">_gameobject</a></li>
  <li><a href="../modules/_hook.html">_hook</a></li>
  <li><a href="../modules/_navmanager.html">_navmanager</a></li>
  <li><a href="../modules/_optional.html">_optional</a></li>
  <li><a href="../modules/_printfix.html">_printfix</a></li>
  <li><a href="../modules/_requirefix.html">_requirefix</a></li>
  <li><a href="../modules/_statemachine.html">_statemachine</a></li>
  <li><a href="../modules/_stateset.html">_stateset</a></li>
  <li><a href="../modules/_table_show.html">_table_show</a></li>
  <li><a href="../modules/_tracker.html">_tracker</a></li>
  <li><a href="../modules/_unsaved.html">_unsaved</a></li>
  <li><a href="../modules/_utility.html">_utility</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>_api</code></h1>
<p>BZ98R LUA Extended API.</p>
<p>
<p> This API creates a full OOP wrapper and replacement the mission
 functions with an event based system for easier expansion.
<p> Dependencies: <a href="../modules/_utility.html#">_utility</a>, <a href="../modules/_hook.html#">_hook</a>, <a href="../modules/_gameobject.html#">_gameobject</a>, <a href="../modules/_customsavetype.html#">_customsavetype</a></p>
    <h3>Info:</h3>
    <ul>
        <li><strong>Author</strong>: John "Nielk1" Klein</li>
    </ul>


<h2><a href="#Events">Events</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Save">Save</a></td>
	<td class="summary">Called when saving state to a save game file, allowing the script to preserve its state.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Load">Load</a></td>
	<td class="summary">Called when loading state from a save game file, allowing the script to restore its state.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Start">Start</a></td>
	<td class="summary">Called when the mission starts for the first time.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#GameKey">GameKey</a></td>
	<td class="summary">Called any time a game key is pressed.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Update">Update</a></td>
	<td class="summary">Called once per tick after updating the network system and before simulating game objects.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#CreateObject">CreateObject</a></td>
	<td class="summary">Called after any game object is created.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#AddObject">AddObject</a></td>
	<td class="summary">Called when a game object gets added to the mission
<p> Handle is the game object that was added
<p> This function is normally called for "important" game objects, and excludes things like Scrap pieces.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DeleteObject">DeleteObject</a></td>
	<td class="summary">Called before a game object is fully deleted.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#CreatePlayer">CreatePlayer</a></td>
	<td class="summary">Called when a player joins the session.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#AddPlayer">AddPlayer</a></td>
	<td class="summary">Called when a player starts sending state updates.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#DeletePlayer">DeletePlayer</a></td>
	<td class="summary">Called when a player leaves the session.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Receive">Receive</a></td>
	<td class="summary">Called when a script-defined message arrives.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Command">Command</a></td>
	<td class="summary">Called for any in-game chat command that was not handled by the system, allowing script-defined commands.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Events"></a>Events</h2>

    <dl class="function">
    <dt>
    <a name = "Save"></a>
    <strong>Save</strong>
    </dt>
    <dd>
    Called when saving state to a save game file, allowing the script to preserve its state.
<p> Any values returned by this function will be passed as parameters to Load when loading the save game file. Save supports nil, boolean, handle, integer, number, string, vector, and matrix data types. It does not support function, thread, or arbitrary userdata types.
<p> The console window will print the saved values in human-readable format.
<p> Call method: <a href="../modules/_hook.html#hook.CallSave">CallSave</a>





    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.AddSaveLoad">_hook.AddSaveLoad</a>
    </ul>


</dd>
    <dt>
    <a name = "Load"></a>
    <strong>Load</strong>
    </dt>
    <dd>
    Called when loading state from a save game file, allowing the script to restore its state.
<p> Data values returned from Save will be passed as parameters to Load in the same order they were returned. Load supports nil, boolean, handle, integer, number, string, vector, and matrix data types. It does not support function, thread, or arbitrary userdata types.
<p> The console window will print the loaded values in human-readable format.
<p> Call method: <a href="../modules/_hook.html#hook.CallLoad">CallLoad</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">loaded</span>
            <span class="types"><span class="type">...</span></span>
         data
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.AddSaveLoad">_hook.AddSaveLoad</a>
    </ul>


</dd>
    <dt>
    <a name = "Start"></a>
    <strong>Start</strong>
    </dt>
    <dd>
    Called when the mission starts for the first time.
<p> Use this function to perform any one-time script initialization.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>





    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "GameKey"></a>
    <strong>GameKey</strong>
    </dt>
    <dd>
    Called any time a game key is pressed.
<p> Key is a string that consisting of zero or more modifiers (Ctrl, Shift, Alt) and a base key.
<p> The base key for keys corresponding to a printable ASCII character is the upper-case version of that character.
<p> The base key for other keys is the label on the keycap (e.g. PageUp, PageDown, Home, End, Backspace, and so forth).
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">key</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         zero or more modifiers (Ctrl, Shift, Alt) and a base key
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "Update"></a>
    <strong>Update</strong>
    </dt>
    <dd>
    Called once per tick after updating the network system and before simulating game objects.
<p> This function performs most of the mission script's game logic.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">dtime</span>
            <span class="types"><span class="type">float</span></span>
         Delta Time
        </li>
        <li><span class="parameter">ttime</span>
            <span class="types"><span class="type">float</span></span>
         Total Time
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "CreateObject"></a>
    <strong>CreateObject</strong>
    </dt>
    <dd>
    Called after any game object is created.
<p> Handle is the game object that was created.
<p> This function will get a lot of traffic so it should not do too much work.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">object</span>
            <span class="types"><span class="type">GameObject</span></span>

        </li>
        <li><span class="parameter">isMapObject</span>
            <span class="types"><span class="type">bool</span></span>

         (<em>optional</em>)
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "AddObject"></a>
    <strong>AddObject</strong>
    </dt>
    <dd>
    Called when a game object gets added to the mission
<p> Handle is the game object that was added
<p> This function is normally called for "important" game objects, and excludes things like Scrap pieces.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">object</span>
            <span class="types"><span class="type">GameObject</span></span>

        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "DeleteObject"></a>
    <strong>DeleteObject</strong>
    </dt>
    <dd>
    Called before a game object is fully deleted.
<p> This function will get a lot of traffic so it should not do too much work.
<p> Note: This is called after the object is largely removed from the game, so most Get functions won't return a valid value.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">object</span>
            <span class="types"><span class="type">GameObject</span></span>

        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "CreatePlayer"></a>
    <strong>CreatePlayer</strong>
    </dt>
    <dd>
    Called when a player joins the session.
<p> Players that join before the host launches trigger CreatePlayer just before the first Update.
<p> Players that join joining after the host launches trigger CreatePlayer on entering the pre-game lobby.
<p> This function gets called for the local player.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">id</span>
            <span class="types"><span class="type">int</span></span>
         DPID number for this player
        </li>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         name for this player
        </li>
        <li><span class="parameter">team</span>
            <span class="types"><span class="type">int</span></span>
         Team number for this player
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "AddPlayer"></a>
    <strong>AddPlayer</strong>
    </dt>
    <dd>
    Called when a player starts sending state updates.
<p> This indicates that a player has finished loaded and started simulating.
<p> This function is _not_ called for the local player.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">id</span>
            <span class="types"><span class="type">int</span></span>
         DPID number for this player
        </li>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         name for this player
        </li>
        <li><span class="parameter">team</span>
            <span class="types"><span class="type">int</span></span>
         Team number for this player
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "DeletePlayer"></a>
    <strong>DeletePlayer</strong>
    </dt>
    <dd>
    Called when a player leaves the session.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllNoReturn">CallAllNoReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">id</span>
            <span class="types"><span class="type">int</span></span>
         DPID number for this player
        </li>
        <li><span class="parameter">name</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         name for this player
        </li>
        <li><span class="parameter">team</span>
            <span class="types"><span class="type">int</span></span>
         Team number for this player
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "Receive"></a>
    <strong>Receive</strong>
    </dt>
    <dd>
    Called when a script-defined message arrives.
<p> This function should return true if it handled the message and false, nil, or none if it did not.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllPassReturn">CallAllPassReturn</a> (TODO consider changing call type to stop after first true)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">from</span>
            <span class="types"><span class="type">int</span></span>
         network player id of the sender.
        </li>
        <li><span class="parameter">type</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         an arbitrary one-character string indicating the script-defined message type.
        </li>
        <li><span class="parameter">data</span>
            <span class="types"><span class="type">...</span></span>
         values passed as parameters to Send will arrive as parameters to Receive in the same order they were sent. Receive supports nil, boolean, handle, integer, number, string, vector, and matrix data types. It does not support function, thread, or arbitrary userdata types.
        </li>
        <li><span class="parameter">priorResult</span>
            <span class="types"><span class="type">HookResult</span></span>
         prior event handler's result
         (<em>optional</em>)
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
    <dt>
    <a name = "Command"></a>
    <strong>Command</strong>
    </dt>
    <dd>
    Called for any in-game chat command that was not handled by the system, allowing script-defined commands.
<p> This function should return true if it handled the command and false, nil, or none if it did not.
<p> LuaMission breaks the command into
<p> Command is the string immediately following the '/'. For example, the command for "/foo" is "foo".
<p> Arguments arrive as a string parameter to Command. For example "/foo 1 2 3" would receive "1 2 3".
<p> The Lua string library provides several functions that can split the string into separate items.
<p> You can use string.match with captures if you have a specific argument list:
 <pre>local foo, bar, baz = string.match(arguments, "(%g+) (%g+) (%g+)")</pre>
<p> You can use string.gmatch, which returns an iterator, if you want to loop through arguments:
 <pre>for arg in string.gmatch(arguments, "%g+") do ... end</pre>
<p> Check the Lua <a href="http://lua-users.org/wiki/PatternsTutorial">patterns tutorial</a> and <a href="http://www.lua.org/manual/5.2/manual.html#6.4.1">patterns manual</a> for more details.
<p> Call method: <a href="../modules/_hook.html#hook.CallAllPassReturn">CallAllPassReturn</a>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">command</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>

        </li>
        <li><span class="parameter">parameters</span>
            <span class="types"><span class="type">...</span></span>

        </li>
        <li><span class="parameter">priorResult</span>
            <span class="types"><span class="type">HookResult</span></span>
         prior event handler's result
         (<em>optional</em>)
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/_hook.html#hook.Add">_hook.Add</a>
    </ul>


</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2025-05-08 18:27:06 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
